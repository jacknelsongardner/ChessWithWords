import { Args } from '@oclif/core';
import { DevvitCommand } from '../util/commands/DevvitCommand.js';
import { optInMetrics, optOutMetrics } from '../util/metrics.js';
class Metrics extends DevvitCommand {
    init(_mode) {
        // We don't need to initialize the project for the metrics command.
        return super.init('None');
    }
    async run() {
        const { args } = await this.parse(Metrics);
        if (args.status === 'on') {
            await optInMetrics();
            this.log('Metrics are now enabled');
        }
        else {
            await optOutMetrics();
            this.log('Metrics are now disabled');
        }
    }
}
Metrics.description = 'Turn CLI metrics collection on or off';
Metrics.args = {
    status: Args.string({
        description: 'Do you want to turn on or off metrics collection?',
        required: true,
        options: ['on', 'off'],
    }),
};
export default Metrics;
