syntax = "proto3";

package reddit.api.metadata.v1;

import "google/protobuf/descriptor.proto";
import "google/protobuf/duration.proto";

option go_package = "github.snooguts.net/reddit/reddit-api-metadata/api/go/metadata/v1;metadata";
option java_multiple_files = true;
option java_outer_classname = "MetadataProto";
option java_package = "com.reddit.api.metadata.v1";

extend google.protobuf.FieldOptions {
  // Metadata describing the usage and behavior of API entity fields
  EntityFieldMetadata entity_field_metadata = 79010000;
}

// The reddit metadata for an entity field. This message is used to encapsulate
// and document information about reddit entities. An "entity" refers to messages
// that represent permanent or semi-permanent resources, as opposed to ephemeral
// messages, such as ones that are used to pass request arguments and responses.
message EntityFieldMetadata {
  // Level of sensitivity that the data stored in a field should be treated with.
  enum SensitivityLevel {
    // This is a default vault used to convey the absence of a value.
    SENSITIVITY_LEVEL_UNSPECIFIED = 0;

    // Value to denote fields that should be treated as user PII
    SENSITIVITY_LEVEL_PII = 1;

    // Value to describe fields that are visible to reddit administrators but not
    // publicly visible to users.
    SENSITIVITY_LEVEL_ADMIN = 2;

    // Value to describe fields that are visible to all users regardless of authentication status.
    SENSITIVITY_LEVEL_PUBLIC = 3;

    // Value to describe fields that are visible only to the owner or owners of the entity
    // the field is defined on. For example, a user is the owner of an account or link. Whereas
    // a moderator with sufficient permissions is an owner of a subreddit. Private data should
    // not be interpreted as PII, but PII is always private.
    SENSITIVITY_LEVEL_PRIVATE = 4;
  }

  // The sensitivity level of the data stored in the annotated field
  SensitivityLevel sensitivity_level = 1;

  // An http url to the design doc which documents the purposed and introduction of this field to the API.
  // New fields added by contributors must have this value populated
  string design_doc_url = 2;

  // The maximum duration the contents of this field can be cached or stored. After which, its value
  // must be expunged. This is most commonly used to describe the retention period of fields which store PII.
  google.protobuf.Duration max_retention = 3;
}
