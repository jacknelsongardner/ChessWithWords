syntax = "proto3";

package reddit.xpaymentsplatform.payapi.v1;

import "google/protobuf/timestamp.proto";
import "reddit/xpaymentsplatform/payapi/v1/common.proto";

option go_package = "github.snooguts.net/reddit/payments-api/api/xpaymentsplatform/payapipb/v1;payapipb";

message PayoutContext {
  Environment environment = 1;
  string user_id = 2;
}

message GetPayoutInfoBatchRequest {
  repeated PayoutContext requests = 1;
}

message GetPayoutInfoBatchResponse {
  repeated PayoutInfo payout_infos = 1;
}

message PayoutInfo {
  ProductPrice current_earnings = 1;
  ProductPrice all_time_earnings = 2;
  PayoutTransactionsConnection transactions_connection = 3;
  Environment environment = 4;
}

message PayoutTransactionsConnection {
  repeated PayoutTransaction transactions = 1;
  PageInfo page_info = 2;
}

message PayoutTransaction {
  // string id = 1; // Reserved to support pagination
  // Earnings for this payout, in the Redditor's currency
  ProductPrice earnings = 2;
  // Amount of earned gold that was (or will be) paid out
  int32 gold = 3;
  ContributorPayoutStatus status = 4;
  google.protobuf.Timestamp date = 5;
}

enum ContributorPayoutStatus {
  CONTRIBUTOR_PAYOUT_STATUS_UNSPECIFIED = 0;

  CONTRIBUTOR_PAYOUT_STATUS_PROCESSING = 1;
  CONTRIBUTOR_PAYOUT_STATUS_COMPLETE = 2;
  CONTRIBUTOR_PAYOUT_STATUS_FAILED = 3;
}
