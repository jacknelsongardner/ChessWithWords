syntax = "proto3";

package reddit.coreplatform.subreddit.v1;

import "google/protobuf/descriptor.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.snooguts.net/reddit/thing-api/go/grpc/subreddit/v1;subreddit";
option java_multiple_files = true;
option java_outer_classname = "SubredditMemberRelationsProto";
option java_package = "com.reddit.coreplatform.api.subreddit.v1";

// This message describes the relationship between a subreddit and an account with permissions to moderate it.
message ModeratorRelation {
  // A message representing the moderator permissions an account has on the moderating subreddit.
  message Permissions {
    // Superuser for the subreddit, when true the user has all moderator capabilities.
    bool all = 1;

    // Manage Users, when true, the moderator can approve submitters and ban and mute users.
    bool manage_access = 2;

    // Manage Settings, when true, the moderator can manage community settings, appearance, emojis, rules, and AutoMod.
    bool manage_config = 3;

    // Manage Flair, when true, the moderator can create and manage user and post flair.
    bool manage_flair = 4;

    // Manage Mail, when true, the moderator can read and respond to mod-mail and mute users.
    bool manage_mail = 5;

    // Manage Posts and Comments, when true, the moderator can access queues, take action on content,
    // and manage collections and events.
    bool manage_posts = 6;

    // Manage Wiki Pages, when true, the moderator can create and manage wiki pages and AutoMod.
    bool manage_wiki = 7;

    // Manage Chats, when true, the moderator can create and manage chats, set up filters and rate limits, and block domains.
    bool manage_chat_config = 8;

    // Monitor Chats, when true, the moderator can remove messages, remove users, and lock chats.
    bool monitor_chat = 9;

    // Manage Channels, when true, a moderator can add, edit and remove subreddit channels.
    bool manage_channels = 10;

    // Manage Community Chat, when set to true, the moderator can moderate community chat channels.
    bool manage_community_chat = 11;
  }

  // The base36 identifier of the subreddit moderator relationship prefixed with rb_.
  string id = 1;

  // The t5 id of the subreddit that the moderator relation is for.
  string subreddit_id = 2;

  // The t2 id of the account moderating the subreddit.
  string account_id = 3;

  // The date the moderator joined the mod team in UTC.
  google.protobuf.Timestamp join_date = 4;

  // The rank of this moderator vs other moderators. Lower outranks higher.
  // Ranks across moderators of a subreddit aren't sequential.
  int64 rank = 5;

  // An set of moderator permission and restrictions.
  Permissions permissions = 6;
}

// This message describes the relationship between a subreddit and a contributor to the subreddit.
message ContributorRelation {
  // The base36 identifier of the subreddit contributor relationship prefixed with rb_.
  string id = 1;

  // The t5 id of the subreddit that the account is a contributor for.
  string subreddit_id = 2;

  // The t2 id of the account contributing to the subreddit.
  string account_id = 3;

  // The date the account was added as a contributor to the subreddit in UTC.
  google.protobuf.Timestamp join_date = 4;
}
