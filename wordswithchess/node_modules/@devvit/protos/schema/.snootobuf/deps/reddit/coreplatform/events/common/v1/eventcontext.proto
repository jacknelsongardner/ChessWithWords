syntax = "proto3";

package reddit.coreplatform.events.common.v1;

import "reddit/coreplatform/events/common/v1/actor.proto";
import "reddit/coreplatform/sensitive/v1/wrappers.proto";

option go_package = "github.snooguts.net/reddit/core-platform-events/go/common/v1";
option java_multiple_files = true;
option java_outer_classname = "EventcontextProto";
option java_package = "com.reddit.coreplatform.events.common.v1";

// wrapper for geolocation metadata values on the event context
message Geolocation {
  // two-character ISO 3166-1 country code where the request originated from
  string country_code = 1;
}

// wrapper for device metadata values on the event context
message Device {
  // device ID of the request
  string id = 1;
}

// wrapper for locale metadata values on the event context
message Locale {
  // IETF language code for the client of the request
  string code = 1;
}

// wrapper for OAuth2 client values on the event context
message OAuthClient {
  // OAuth client ID of the request
  string id = 1;
  // OAuth client type of the request
  string type = 2;
}

// wrapper for origin values on the event context
message OriginService {
  // name of the service that serves as the origin of the request
  string name = 1;
}

// ClientIP is a wrapper for the client IP that affected the change represented by this event
message ClientIP {
  // client IP address
  string value = 1;
}

// EventContext containing metadata values taken from the edge context used when the event was created
message EventContext {
  // geolocation metadata values
  Geolocation geolocation = 1;
  // device metadata values
  Device device = 2;
  // locale metadata values
  Locale locale = 3;
  // oauth client metadata values
  OAuthClient oauth_client = 4;
  // origin service metadata values
  OriginService origin_service = 5;
  // request ID
  string request_id = 6;
  // client IP Address
  optional reddit.coreplatform.sensitive.v1.SensitiveString client_ip = 7;
  // actor metadata
  reddit.coreplatform.events.common.v1.Actor actor = 8;
}
