syntax = "proto3";

package reddit.xpaymentsplatform.payapi.v1;

import "google/protobuf/timestamp.proto";
import "reddit/xpaymentsplatform/payapi/v1/common.proto";

option go_package = "github.snooguts.net/reddit/payments-api/api/xpaymentsplatform/payapipb/v1;payapipb";

enum TimeWindow {
  TIME_WINDOW_UNSPECIFIED = 0;
  MONTHLY = 1;
}

message GetAggregatedTransactionsListRequest {
  string owner_id = 1; // can be either t2 or t5 id (user / subreddit)
  Environment environment = 2;
  optional ProductType product_type = 3;
  optional ProductSubType product_sub_type = 4;
  optional TimeWindow time_window = 5;
  PageInfo page_info = 6;
  TransactionsView transactions_view = 7;
}

message GetAggregatedTransactionsListResponse {
  repeated AggregatedTransaction aggregated_transactions = 1;
  PageInfo next_page = 2;
}

message AggregatedTransaction {
  google.protobuf.Timestamp time_window_start = 1;
  google.protobuf.Timestamp time_window_end = 2;
  ProductType product_type = 3;
  optional ProductSubType product_sub_type = 4;
  int32 num_transactions = 5;
  ProductPrice aggregated_transactions_amount = 6;
}
