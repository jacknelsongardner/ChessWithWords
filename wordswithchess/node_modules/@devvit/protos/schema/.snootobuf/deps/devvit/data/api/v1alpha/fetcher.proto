syntax = "proto3";

package devvit.data.api.v1alpha;

option go_package = "github.snooguts.net/reddit/devplatform-api/go/grpc/devvit/data/api/v1alpha";

//Reflector so we can serve the OpenAPI yaml using grpc
service OpenAPIReflector {
  rpc FetchYAML(FetchYAMLRequest) returns (FetchYAMLResponse);
}

message FetchYAMLRequest {
  bytes previous_hash = 1; // Client-provided hash of their current YAML
}

message FetchYAMLResponse {
  bool is_modified = 1; // Indicates if the YAML has changed
  bytes yaml_content = 2; // Full YAML content (only if modified)
  bytes current_hash = 3; // Hash of the current YAML
}
