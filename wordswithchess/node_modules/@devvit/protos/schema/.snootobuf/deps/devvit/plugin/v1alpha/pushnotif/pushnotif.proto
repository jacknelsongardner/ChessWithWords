syntax = "proto3";

package devvit.plugin.v1alpha.pushnotif;

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/plugin/v1alpha/pushnotif";
option java_package = "com.reddit.devvit.plugin.v1alpha.pushnotif";

// Request to queue a push notification for a user
message QueuePushNotificationRequest {
  // The Reddit user ID to send the notification to (e.g. "t2_abc123")
  string recipient_id = 1;

  // The title of the push notification
  string title = 2;

  // The body text of the push notification
  string body = 3;

  // The thing (comment or post) associated with this notification
  oneof thing {
    // The fullname of a comment (e.g., "t1_abc123")
    string comment = 4;

    // The fullname of a post (e.g., "t3_abc123")
    string post = 5;
  }
}

// Response from queuing a push notification
message QueuePushNotificationResponse {
  // Whether the notification was successfully queued
  bool success = 1;

  // Optional message providing additional context about the operation
  string message = 2;

  // Unix timestamp when the notification was queued
  int64 timestamp = 3;
}

// Push notification service for queuing notifications to users
//
// EXPERIMENTAL: This service is experimental and intended for limited use.
// The API may change without notice and should not be used in production
// without explicit approval.
service PushNotif {
  // Queue a push notification for delivery to a user
  //
  // This method queues a notification for asynchronous delivery. The actual
  // delivery timing and success is not guaranteed by this service.
  rpc QueuePushNotification(QueuePushNotificationRequest) returns (QueuePushNotificationResponse);
}
